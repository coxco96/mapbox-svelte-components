{"version":3,"file":"MapScriptPage.stories-899b0b93.js","sources":["../../src/stories/map-stories/storybook-components/MapScriptPage.svelte","../../src/lib/utils/actions/spin-globe.js"],"sourcesContent":["<script>\n    import MapContainer from '$lib/components/MapContainer.svelte';\n</script>\n\n<MapContainer {...$$props}/>","// this code from a Mapbox GL JS official example\n\nexport function spinGlobe(map) {\n \n// At low zooms, complete a revolution every two minutes.\nconst secondsPerRevolution = 120;\n// Above zoom level 5, do not rotate.\nconst maxSpinZoom = 5;\n// Rotate at intermediate speeds between zoom levels 3 and 5.\nconst slowSpinZoom = 3;\n \nlet userInteracting = false;\nlet spinEnabled = true;\n \nfunction spinGlobe() {\nconst zoom = map.getZoom();\nif (spinEnabled && !userInteracting && zoom < maxSpinZoom) {\nlet distancePerSecond = 360 / secondsPerRevolution;\nif (zoom > slowSpinZoom) {\n// Slow spinning at higher zooms\nconst zoomDif =\n(maxSpinZoom - zoom) / (maxSpinZoom - slowSpinZoom);\ndistancePerSecond *= zoomDif;\n}\nconst center = map.getCenter();\ncenter.lng -= distancePerSecond;\n// Smoothly animate the map over one second.\n// When this animation is complete, it calls a 'moveend' event.\nmap.easeTo({ center, duration: 1000, easing: (n) => n });\n}\n}\n \n// Pause spinning on interaction\nmap.on('mousedown', () => {\nuserInteracting = true;\n});\n \n// Restart spinning the globe when interaction is complete\nmap.on('mouseup', () => {\nuserInteracting = false;\nspinGlobe();\n});\n \n// These events account for cases where the mouse has moved\n// off the map, so 'mouseup' will not be fired.\nmap.on('dragend', () => {\nuserInteracting = false;\nspinGlobe();\n});\nmap.on('pitchend', () => {\nuserInteracting = false;\nspinGlobe();\n});\nmap.on('rotateend', () => {\nuserInteracting = false;\nspinGlobe();\n});\n \n// When animation is complete, start spinning if there is no ongoing interaction\nmap.on('moveend', () => {\nspinGlobe();\n});\n}"],"names":["ctx","spinGlobe","map","userInteracting","zoom","distancePerSecond","zoomDif","center","n"],"mappings":"gSAIkBA,EAAO,CAAA,CAAA,+KAAPA,EAAO,CAAA,CAAA,CAAA,CAAA,sYCFlB,SAASC,EAAUC,EAAK,CAS/B,IAAIC,EAAkB,GAGtB,SAASF,GAAY,CACrB,MAAMG,EAAOF,EAAI,UACjB,GAAmB,CAACC,GAAmBC,EAAO,EAAa,CAC3D,IAAIC,EAAoB,EACxB,GAAID,EAAO,EAAc,CAEzB,MAAME,GACL,EAAcF,GAAS,EACxBC,GAAqBC,EAErB,MAAMC,EAASL,EAAI,YACnBK,EAAO,KAAOF,EAGdH,EAAI,OAAO,CAAE,OAAAK,EAAQ,SAAU,IAAM,OAASC,GAAMA,CAAC,CAAE,EAEvD,CAGAN,EAAI,GAAG,YAAa,IAAM,CAC1BC,EAAkB,EAClB,CAAC,EAGDD,EAAI,GAAG,UAAW,IAAM,CACxBC,EAAkB,GAClBF,GACA,CAAC,EAIDC,EAAI,GAAG,UAAW,IAAM,CACxBC,EAAkB,GAClBF,GACA,CAAC,EACDC,EAAI,GAAG,WAAY,IAAM,CACzBC,EAAkB,GAClBF,GACA,CAAC,EACDC,EAAI,GAAG,YAAa,IAAM,CAC1BC,EAAkB,GAClBF,GACA,CAAC,EAGDC,EAAI,GAAG,UAAW,IAAM,CACxBD,GACA,CAAC,CACD;;;;;;;;;;;"}